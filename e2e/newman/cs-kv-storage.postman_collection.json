{
	"info": {
		"_postman_id": "9998de18-9307-403e-96f3-ecd2b7cfe7c3",
		"name": "cs-kv-storage",
		"description": "E2E tests for cs-kv-storage",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "kv-storage",
			"description": null,
			"item": [
				{
					"name": "List keys",
					"description": null,
					"item": [
						{
							"name": "List a storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "8d355335-0953-4854-8c56-48beb876dfc2",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function() {",
											"  pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Content-Type is application/json\", function () {",
											"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
											"});",
											"",
											"pm.test(\"Response body contains list of keys\", function () {",
											"    var jsonData = pm.response.json().sort();",
											"    pm.expect(jsonData).to.eql(['key1', 'key2', 'key3', 'key4', 'key5']);",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/list/{{read_only_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"list",
										"{{read_only_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "List an empty storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "2517b115-9ba1-4c38-ba67-debb430bade5",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function() {",
											"  pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Content-Type is application/json\", function () {",
											"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
											"});",
											"",
											"pm.test(\"Response body is an empty array\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData).to.eql([]);",
											"});",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "98982517-5143-481d-a85b-8eb037420a29",
										"type": "text/javascript",
										"exec": [
											"const es_url = pm.variables.get(\"es_url\");"
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/list/empty",
									"host": [
										"{{url}}"
									],
									"path": [
										"list",
										"empty"
									]
								}
							},
							"response": []
						},
						{
							"name": "List non existent storage",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "f2910574-e8fa-4909-a6b4-ce4fefc34250",
										"type": "text/javascript",
										"exec": [
											"const es_url = pm.variables.get(\"es_url\");"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "1554d6eb-03b7-4d64-ae88-eaac04c9fed4",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function() {",
											"  pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/list/nonexistent",
									"host": [
										"{{url}}"
									],
									"path": [
										"list",
										"nonexistent"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5c60f670-969a-41c8-8a8b-7e214fa9852a",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "5b8f7e24-ed2a-4917-8fe7-2325319de32d",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Get value",
					"description": null,
					"item": [
						{
							"name": "Get a value",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "243f7d3c-db59-40fe-85cf-bf460eac8e91",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function() {",
											"  pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Content-Type is text/plain\", function () {",
											"    pm.response.to.have.header(\"Content-Type\", \"text/plain;charset=utf-8\");",
											"});",
											"",
											"pm.test(\"Response body is a \" + pm.variables.get(\"some_value\"), function () {",
											"    pm.expect(pm.response.text()).to.eql(pm.variables.get(\"some_value\"));",
											"});",
											"",
											""
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/get/{{read_only_storage}}/{{some_key}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"get",
										"{{read_only_storage}}",
										"{{some_key}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get non existent value",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b3e11298-d466-4d27-a46a-a84b4137d701",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function() {",
											"  pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											""
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/get/{{read_only_storage}}/{{empty_key}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"get",
										"{{read_only_storage}}",
										"{{empty_key}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get from non existent storage",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "b5b3a0ca-49f9-4b38-9d82-64c6afb2d334",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "3881f3bb-15aa-49b2-9203-0e7f0a479a14",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function() {",
											"  pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/get/{{non_existent_storage}}/{{some_key}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"get",
										"{{non_existent_storage}}",
										"{{some_key}}"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "acfe6b56-9863-4802-a1b4-1a24081550cc",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "bdb3fe18-a2da-400a-b983-1077bb202a25",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Get multiple values",
					"description": null,
					"item": [
						{
							"name": "Get values",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "419e39ab-5024-4e8d-9e1f-c2b977cbd0da",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Content-Type is application/json\", function () {",
											"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
											"});",
											"",
											"pm.test(\"Response body is a map key to value\", function () {",
											"    var example = {",
											"        \"key1\": \"value1\",",
											"        \"key2\": \"value2\",",
											"        \"key3\": \"value3\"",
											"    }",
											"    pm.expect(pm.response.json()).to.eql(example);",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\"key1\", \"key2\", \"key3\"]"
								},
								"url": {
									"raw": "{{url}}/get/{{read_only_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"get",
										"{{read_only_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get with wrong Content-Type",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "924874c6-58c0-4fc2-b28d-604c08a0a436",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\"key1\", \"key2\", \"key3\"]"
								},
								"url": {
									"raw": "{{url}}/get/{{read_only_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"get",
										"{{read_only_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get with bad json body",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f90777c6-79c7-41a0-ba3c-db8036a51b13",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\"key1\", \"key2\", \"key3\""
								},
								"url": {
									"raw": "{{url}}/get/{{read_only_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"get",
										"{{read_only_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get with wrong body format",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "2f62666e-8edb-414f-ae53-1d5c150736d6",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\"key1\", \"key2\", \"key3\""
								},
								"url": {
									"raw": "{{url}}/get/{{read_only_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"get",
										"{{read_only_storage}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Set value",
					"description": null,
					"item": [
						{
							"name": "Set with wrong Content-Type",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c7e683da-04ef-4858-9b29-359e6fead5de",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"editable_storage\") + \"/_doc/\" + pm.variables.get(\"some_key\"),",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Document is not changed\", function () {",
											"        pm.expect(res.json()._source.value).to.eql(pm.variables.get(\"some_value\"));",
											"    });",
											"});"
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "d296aab1-4aa2-4e1d-8b34-8e217df06b7e",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "newValue"
								},
								"url": {
									"raw": "{{url}}/set/{{editable_storage}}/{{some_key}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"set",
										"{{editable_storage}}",
										"{{some_key}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Set value",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c7d4cab6-a194-41e1-8126-ddf84e4a239c",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"editable_storage\") + \"/_doc/\" + pm.variables.get(\"some_key\"),",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Document actually indexed\", function () {",
											"        pm.expect(res.json()[\"_source\"][\"value\"]).to.eql(\"newValue\");",
											"    });",
											"});",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "546e693f-cf78-42ad-b416-ffdc2737ffc6",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "text/plain"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "newValue"
								},
								"url": {
									"raw": "{{url}}/set/{{editable_storage}}/{{some_key}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"set",
										"{{editable_storage}}",
										"{{some_key}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Set multiple values",
					"description": null,
					"item": [
						{
							"name": "Set with wrong Content-Type",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "71e973a4-d61a-44f3-9e05-824c7bfcea72",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"const source = JSON.stringify({\"ids\": [\"key1\",\"key2\",\"key3\",\"key4\"]})",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"multieditable_storage\") + \"/_doc/_mget?source=\" + source + \"&source_content_type=application/json\",",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Documents are not changed\", function () {",
											"            const result = res.json()[\"docs\"].map(function callback(c, i, a){",
											"                return {",
											"                    key: c._id,",
											"                    value: c._source.value",
											"                };",
											"            })",
											"            const example = [",
											"                {key: \"key1\", value: \"value1\"},",
											"                {key: \"key2\", value: \"value2\"},",
											"                {key: \"key3\", value: \"value3\"},",
											"                {key: \"key4\", value: \"value4\"}];",
											"            pm.expect(result).to.eql(example);",
											"    });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "text/plain"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"key1\": \"newValue1\",\n\t\"key2\": \"newValue2\",\n\t\"key3\": \"newValue3\",\n\t\"key4\": \"newValue4\"\n}"
								},
								"url": {
									"raw": "{{url}}/set/{{multieditable_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"set",
										"{{multieditable_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Set with bad json",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "07d22477-c4ed-457a-b4d7-b3a8be1901ae",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"const source = JSON.stringify({\"ids\": [\"key1\",\"key2\",\"key3\",\"key4\"]})",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"multieditable_storage\") + \"/_doc/_mget?source=\" + source + \"&source_content_type=application/json\",",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Documents are not changed\", function () {",
											"            const result = res.json()[\"docs\"].map(function callback(c, i, a){",
											"                return {",
											"                    key: c._id,",
											"                    value: c._source.value",
											"                };",
											"            })",
											"            const example = [",
											"                {key: \"key1\", value: \"value1\"},",
											"                {key: \"key2\", value: \"value2\"},",
											"                {key: \"key3\", value: \"value3\"},",
											"                {key: \"key4\", value: \"value4\"}];",
											"            pm.expect(result).to.eql(example);",
											"    });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"key1\": \"newValue1\",\n\t\"key2\": \"newValue2\",\n\t\"key3\": \"newValue3\",\n\t\"key4\": \"newValue4\"\n"
								},
								"url": {
									"raw": "{{url}}/set/{{multieditable_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"set",
										"{{multieditable_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Set with wrong body format",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "a9ca34c3-fea7-4e36-b0ae-d472d731ef91",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"const source = JSON.stringify({\"ids\": [\"key1\",\"key2\",\"key3\",\"key4\"]})",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"multieditable_storage\") + \"/_doc/_mget?source=\" + source + \"&source_content_type=application/json\",",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Documents are not changed\", function () {",
											"            const result = res.json()[\"docs\"].map(function callback(c, i, a){",
											"                return {",
											"                    key: c._id,",
											"                    value: c._source.value",
											"                };",
											"            })",
											"            const example = [",
											"                {key: \"key1\", value: \"value1\"},",
											"                {key: \"key2\", value: \"value2\"},",
											"                {key: \"key3\", value: \"value3\"},",
											"                {key: \"key4\", value: \"value4\"}];",
											"            pm.expect(result).to.eql(example);",
											"    });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n\t{\"key1\": \"newValue1\"},\n\t{\"key2\": \"newValue2\"},\n\t{\"key3\": \"newValue3\"},\n\t{\"key4\": \"newValue4\"}\n]\n"
								},
								"url": {
									"raw": "{{url}}/set/{{storage_uuid}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"set",
										"{{storage_uuid}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Set values",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c9fce8c3-f738-484e-bda5-e3cb563b2c93",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Content-Type is application/json\", function () {",
											"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
											"});",
											"",
											"pm.test(\"Response body contains statuses of operations\", function () {",
											"    var jsonData = pm.response.json();",
											"    var example = {",
											"        \"key1\" : true,",
											"        \"key2\" : true,",
											"        \"key3\" : true,",
											"        \"key4\" : true",
											"    }",
											"    pm.expect(jsonData).to.eql(example);",
											"});",
											"const source = JSON.stringify({\"ids\": [\"key1\",\"key2\",\"key3\",\"key4\"]})",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"multieditable_storage\") + \"/_doc/_mget?source=\" + source + \"&source_content_type=application/json\",",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Documents are actually indexed\", function () {",
											"            const result = res.json()[\"docs\"].map(function callback(c, i, a){",
											"                return {",
											"                    key: c[\"_id\"],",
											"                    value: c[\"_source\"][\"value\"]",
											"                };",
											"            })",
											"            const example = [",
											"                {key: \"key1\", value: \"newValue1\"},",
											"                {key: \"key2\", value: \"newValue2\"},",
											"                {key: \"key3\", value: \"newValue3\"},",
											"                {key: \"key4\", value: \"newValue4\"}];",
											"    });",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"key1\": \"newValue1\",\n\t\"key2\": \"newValue2\",\n\t\"key3\": \"newValue3\",\n\t\"key4\": \"newValue4\"\n}"
								},
								"url": {
									"raw": "{{url}}/set/{{multieditable_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"set",
										"{{multieditable_storage}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Delete value",
					"description": null,
					"item": [
						{
							"name": "Delete from non existent storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "5053937f-d3bd-4bc9-af0a-012e7a6f0895",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});"
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "530b5c22-7ca1-49dd-955e-ff22d92f122d",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/delete/{{non_existent_storage}}/{{some_key}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"delete",
										"{{non_existent_storage}}",
										"{{some_key}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete value",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "838612af-7652-4cbe-8a1d-c39d2d8dbe01",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"deletable_storage\") + \"/_doc/\" + pm.variables.get(\"some_key\"),",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Document is actually deleted\", function () {",
											"            pm.expect(res.json().found).to.eql(false);",
											"        });",
											"    }",
											");",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "530b5c22-7ca1-49dd-955e-ff22d92f122d",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/delete/{{deletable_storage}}/{{some_key}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"delete",
										"{{deletable_storage}}",
										"{{some_key}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Delete multiple values",
					"description": null,
					"item": [
						{
							"name": "Delete with wrong Content-Type",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "454e7675-3e94-4e07-abc0-1fd1739577f2",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"const source = JSON.stringify({\"ids\": [\"key1\",\"key2\",\"key3\"]})",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"multideletable_storage\") + \"/_doc/_mget?source=\" + source + \"&source_content_type=application/json\",",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Documents are not deleted\", function () {",
											"            const result = res.json().docs.every(function callback(c){",
											"                return c.found;",
											"            });",
											"            pm.expect(result).to.eql(true);",
											"        });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "text/plain"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\"key1\", \"key2\", \"key3\"]"
								},
								"url": {
									"raw": "{{url}}/delete/{{multideletable_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"delete",
										"{{multideletable_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete with bad json",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "8a3b4a3f-10a5-4bb9-89a8-b219dc784403",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"const source = JSON.stringify({\"ids\": [\"key1\",\"key2\",\"key3\"]})",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"multideletable_storage\") + \"/_doc/_mget?source=\" + source + \"&source_content_type=application/json\",",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Documents are not deleted\", function () {",
											"            const result = res.json().docs.every(function callback(c){",
											"                return c.found;",
											"            });",
											"            pm.expect(result).to.eql(true);",
											"        });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\"key1\", \"key2\", \"key3\""
								},
								"url": {
									"raw": "{{url}}/delete/{{multideletable_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"delete",
										"{{multideletable_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete with wrong body format",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "a8149f84-eda1-4f3f-9fde-cab72c57656f",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"const source = JSON.stringify({\"ids\": [\"key1\",\"key2\",\"key3\"]})",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"multideletable_storage\") + \"/_doc/_mget?source=\" + source + \"&source_content_type=application/json\",",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Documents are not deleted\", function () {",
											"            const result = res.json().docs.every(function callback(c){",
											"                return c.found;",
											"            });",
											"            pm.expect(result).to.eql(true);",
											"        });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "text/plain"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\"key1\", \"key2\", \"key3\"]"
								},
								"url": {
									"raw": "{{url}}/delete/{{multideletable_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"delete",
										"{{multideletable_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete values",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "1bbe1693-2136-4b00-a71c-e1697864fa72",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Content-Type is application/json\", function () {",
											"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
											"});",
											"",
											"pm.test(\"Response body contains statuses of operations\", function () {",
											"    var jsonData = pm.response.json();",
											"    var example = {",
											"        \"key1\" : true,",
											"        \"key2\" : true,",
											"        \"key3\" : true",
											"    }",
											"    pm.expect(jsonData).to.eql(example);",
											"});",
											"",
											"const source = JSON.stringify({\"ids\": [\"key1\",\"key2\",\"key3\"]})",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"multideletable_storage\") + \"/_doc/_mget?source=\" + source + \"&source_content_type=application/json\",",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"Documents actually deleted\", function () {",
											"            const result = res.json().docs.every(function callback(c){",
											"                return !c.found;",
											"            });",
											"            pm.expect(result).to.eql(true);",
											"        });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\"key1\", \"key2\", \"key3\"]"
								},
								"url": {
									"raw": "{{url}}/delete/{{multideletable_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"delete",
										"{{multideletable_storage}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Clear storage",
					"description": null,
					"item": [
						{
							"name": "Clear storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "e939ce71-26ea-49c9-8210-60556275a03d",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"var test = function() {",
											"    pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"cleanable_storage\") + \"/_doc/_search\",",
											"        method: 'POST',",
											"        header: 'Content-Type:application/json',",
											"        body: {",
											"            mode: 'raw',",
											"            raw: JSON.stringify({\"query\": {\"match_all\": {}}})",
											"        }},",
											"    function (err, res) {",
											"        pm.test(\"Storage is clear\", function() {",
											"            pm.expect(res.json().hits.total).to.eql(0);",
											"        });",
											"});",
											"};",
											"setTimeout(test, 1500);",
											""
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "3f04a838-3537-4dd5-83cd-e97ba1a13787",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/clear/{{cleanable_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"clear",
										"{{cleanable_storage}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "1614f2d8-26fe-4d0d-bcc6-d35f15fdd259",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "bb925800-7558-47e4-966c-d611b1567ccd",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "kv-storage-manager",
			"description": null,
			"item": [
				{
					"name": "Set temporary storage ttl",
					"description": null,
					"item": [
						{
							"name": "Set TTL of non existent storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "164d5bf7-f101-4d95-a3f8-1e410302ff90",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"})",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{non_existent_storage}}?ttl=565656",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{non_existent_storage}}"
									],
									"query": [
										{
											"key": "ttl",
											"value": "565656"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Set TTL of persistent storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "588b00a6-5bcf-48fd-a01e-a03d0c2a8748",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"})",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/storage-registry/_doc/\" + pm.variables.get(\"acc_storage\"),",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"TTL is not set\", function () {",
											"            pm.expect(res.json()._source.ttl).to.eql(undefined);",
											"    });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{acc_storage}}?ttl=565656",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{acc_storage}}"
									],
									"query": [
										{
											"key": "ttl",
											"value": "565656"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Set bad TTL",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "5af7de9a-4d90-428a-af97-53330b3314c4",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"})",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/storage-registry/_doc/\" + pm.variables.get(\"temp_storage\"),",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"TTL is not changed\", function () {",
											"            pm.expect(res.json()._source.ttl).to.eql(10000);",
											"    });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{temp_storage}}?ttl=10.seconds",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{temp_storage}}"
									],
									"query": [
										{
											"key": "ttl",
											"value": "10.seconds"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Send request without TTL specified",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0bbceeda-3ca6-4c4a-98ee-483930feabc9",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"})",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/storage-registry/_doc/\" + pm.variables.get(\"temp_storage\"),",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"TTL is not changed\", function () {",
											"            pm.expect(res.json()._source.ttl).to.eql(10000);",
											"    });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{temp_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{temp_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Set temporary storage ttl",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "3eb6b707-ddf9-46f9-aabf-9a9440cc5e13",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"})",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/storage-registry/_doc/\" + pm.variables.get(\"temp_storage\"),",
											"        method: 'GET'},",
											"    function (err, res) {",
											"        pm.test(\"TTL actually changed\", function () {",
											"            pm.expect(res.json()._source.ttl).to.eql(565656);",
											"    });",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{temp_storage}}?ttl=565656",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{temp_storage}}"
									],
									"query": [
										{
											"key": "ttl",
											"value": "565656"
										}
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Delete temporary storage",
					"description": null,
					"item": [
						{
							"name": "Delete persistent storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "e6030dc9-9312-42fc-8dcc-22a4ee86a63f",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 400\", function () {",
											"    pm.response.to.have.status(400);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.expect(pm.response.text()).to.eql(\"\");",
											"});",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/storage-registry/_doc/\" + pm.variables.get(\"acc_storage\"),",
											"        method: 'HEAD'},",
											"    function (err, res) {",
											"        pm.test(\"Storage is not deleted\", function () {",
											"            pm.expect(res).to.have.property('code', 200);",
											"            pm.expect(res).to.have.property('status', 'OK');",
											"        });",
											"    }",
											");"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{acc_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{acc_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete non existent storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f098c7a9-7991-4119-9ee3-e8a8a653367a",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{non_existent_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{non_existent_storage}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete storage with no index",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9a6b606b-da10-406e-af2a-386da0fefea8",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/storage-registry/_doc/\" + pm.variables.get(\"no_index_storage\"),",
											"        method: 'HEAD'},",
											"    function (err, res) {",
											"        pm.test(\"Storage record in registry deleted\", function () {",
											"            pm.expect(res).to.have.property('code', 404);",
											"            pm.expect(res).to.have.property('status', 'Not Found');",
											"        });",
											"    }",
											");"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{no_index_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{no_index_storage}}"
									]
								},
								"description": "Delete temporary storage that have no record with its UUID in storage registry"
							},
							"response": []
						},
						{
							"name": "Delete unregistered storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "06a24d02-082d-416e-950a-e42d4ceae842",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"not_registered_storage\"),",
											"        method: 'HEAD'},",
											"    function (err, res) {",
											"        pm.test(\"Storage index deleted\", function () {",
											"            pm.expect(res).to.have.property('code', 404);",
											"            pm.expect(res).to.have.property('status', 'Not Found');",
											"        });",
											"    }",
											");"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{not_registered_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{not_registered_storage}}"
									]
								},
								"description": "Delete temporary storage that have no record with its UUID in storage registry"
							},
							"response": []
						},
						{
							"name": "Delete temporary storage",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "a569be0a-d84f-475a-a859-b8b2260c4a06",
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Body is empty\", function () {",
											"    pm.response.to.have.body(\"\");",
											"});",
											"",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/storage-registry/_doc/\" + pm.variables.get(\"temp_storage\"),",
											"        method: 'HEAD'},",
											"    function (err, res) {",
											"        pm.test(\"Storage record in registry deleted\", function () {",
											"            pm.expect(res).to.have.property('code', 404);",
											"            pm.expect(res).to.have.property('status', 'Not Found');",
											"        });",
											"    }",
											");",
											"",
											"pm.sendRequest({",
											"        url: pm.variables.get(\"es_url\") + \"/\" + pm.variables.get(\"storage_data_template\") + \"-\" + pm.variables.get(\"temp_storage\"),",
											"        method: 'HEAD'},",
											"    function (err, res) {",
											"        pm.test(\"Storage index deleted\", function () {",
											"            pm.expect(res).to.have.property('code', 404);",
											"            pm.expect(res).to.have.property('status', 'Not Found');",
											"        });",
											"    }",
											");"
										]
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{url}}/storage/{{temp_storage}}",
									"host": [
										"{{url}}"
									],
									"path": [
										"storage",
										"{{temp_storage}}"
									]
								}
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				}
			]
		},
		{
			"name": "health",
			"description": null,
			"item": [
				{
					"name": "Check health",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "91566781-aaab-45c6-af73-f5b7d6cff594",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Body is empty\", function () {",
									"    pm.response.to.have.body(\"\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}/health",
							"host": [
								"{{url}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "Check health detailed",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2276f893-f223-43aa-a5ba-9bb6364f25ec",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Content-Type is application/json\", function () {",
									"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
									"});",
									"",
									"pm.test(\"Body contains detailed checks info\", function () {",
									"    var example = {",
									"        status: \"HEALTHY\",",
									"        checks: [",
									"            {",
									"                name: \"STORAGE_REGISTRY\",",
									"                status: \"HEALTHY\",",
									"                message: \"OK\"",
									"            },",
									"            {",
									"                name: \"STORAGE_DATA_TEMPLATE\",",
									"                status: \"HEALTHY\",",
									"                message: \"OK\"",
									"            },",
									"            {",
									"                name: \"STORAGE_HISTORY_TEMPLATE\",",
									"                status: \"HEALTHY\",",
									"                message: \"OK\"",
									"            }]",
									"    };",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.eql(example);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}/health?detailed=true",
							"host": [
								"{{url}}"
							],
							"path": [
								"health"
							],
							"query": [
								{
									"key": "detailed",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Unhealthy registry",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7950abda-8fca-4d49-95c1-2b8da8ddd536",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 500\", function () {",
									"    pm.response.to.have.status(500);",
									"});",
									"",
									"pm.test(\"Content-Type is application/json\", function () {",
									"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
									"});",
									"",
									"pm.test(\"Body contains detailed checks info\", function () {",
									"    var example = {",
									"        status: \"UNHEALTHY\",",
									"        checks: [",
									"            {",
									"                name: \"STORAGE_REGISTRY\",",
									"                status: \"UNHEALTHY\",",
									"                message: \"Not found\"",
									"            },",
									"            {",
									"                name: \"STORAGE_DATA_TEMPLATE\",",
									"                status: \"HEALTHY\",",
									"                message: \"OK\"",
									"            },",
									"            {",
									"                name: \"STORAGE_HISTORY_TEMPLATE\",",
									"                status: \"HEALTHY\",",
									"                message: \"OK\"",
									"            }]",
									"    };",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.eql(example);",
									"});"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "c54850c2-147e-482f-8f2a-fcd50877925b",
								"type": "text/javascript",
								"exec": [
									"const es_url = pm.variables.get(\"es_url\");",
									"const storage_registry = pm.variables.get(\"storage_registry\");",
									"//remove storage registry",
									"pm.sendRequest({",
									"  url: es_url + \"/\" + storage_registry,",
									"  method: 'DELETE'",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}/health?detailed=true",
							"host": [
								"{{url}}"
							],
							"path": [
								"health"
							],
							"query": [
								{
									"key": "detailed",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Unhealthy registry and storage template",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c974abbf-ae8a-4b9c-9b1e-9f087a30dbfd",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 500\", function () {",
									"    pm.response.to.have.status(500);",
									"});",
									"",
									"pm.test(\"Content-Type is application/json\", function () {",
									"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
									"});",
									"",
									"pm.test(\"Body contains detailed checks info\", function () {",
									"    var example = {",
									"        status: \"UNHEALTHY\",",
									"        checks: [",
									"            {",
									"                name: \"STORAGE_REGISTRY\",",
									"                status: \"UNHEALTHY\",",
									"                message: \"Not found\"",
									"            },",
									"            {",
									"                name: \"STORAGE_DATA_TEMPLATE\",",
									"                status: \"UNHEALTHY\",",
									"                message: \"Not found\"",
									"            },",
									"            {",
									"                name: \"STORAGE_HISTORY_TEMPLATE\",",
									"                status: \"HEALTHY\",",
									"                message: \"OK\"",
									"            }]",
									"    };",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.eql(example);",
									"});"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "3e95c134-0741-47dd-8826-1d4cccacc60b",
								"type": "text/javascript",
								"exec": [
									"const es_url = pm.variables.get(\"es_url\");",
									"const storage_data_template = pm.variables.get(\"storage_data_template\");",
									"//remove storage registry",
									"pm.sendRequest({",
									"  url: es_url + \"/_template/\" + storage_data_template,",
									"  method: 'DELETE'",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}/health?detailed=true",
							"host": [
								"{{url}}"
							],
							"path": [
								"health"
							],
							"query": [
								{
									"key": "detailed",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Fully unhealthy",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ba313573-16b9-4393-aa11-e86a9febacac",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 500\", function () {",
									"    pm.response.to.have.status(500);",
									"});",
									"",
									"pm.test(\"Content-Type is application/json\", function () {",
									"    pm.response.to.have.header(\"Content-Type\", \"application/json;charset=utf-8\");",
									"});",
									"",
									"pm.test(\"Body contains detailed checks info\", function () {",
									"    var example = {",
									"        status: \"UNHEALTHY\",",
									"        checks: [",
									"            {",
									"                name: \"STORAGE_REGISTRY\",",
									"                status: \"UNHEALTHY\",",
									"                message: \"Not found\"",
									"            },",
									"            {",
									"                name: \"STORAGE_DATA_TEMPLATE\",",
									"                status: \"UNHEALTHY\",",
									"                message: \"Not found\"",
									"            },",
									"            {",
									"                name: \"STORAGE_HISTORY_TEMPLATE\",",
									"                status: \"UNHEALTHY\",",
									"                message: \"Not found\"",
									"            }]",
									"    };",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.eql(example);",
									"});"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4e30e048-2f49-4a4d-bbbd-f551ffe330b3",
								"type": "text/javascript",
								"exec": [
									"const es_url = pm.variables.get(\"es_url\");",
									"const storage_history_template = pm.variables.get(\"storage_history_template\");",
									"//remove storage registry",
									"pm.sendRequest({",
									"  url: es_url + \"/_template/\" + storage_history_template,",
									"  method: 'DELETE'",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}/health?detailed=true",
							"host": [
								"{{url}}"
							],
							"path": [
								"health"
							],
							"query": [
								{
									"key": "detailed",
									"value": "true"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "47257ac9-4e9a-40a2-b4bf-5a2fda812bbb",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "738f7413-5a71-432e-9df7-1cc3f7995c7a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "23b1d4e3-ffe1-401b-ad8e-aa76782e52d5",
			"key": "url",
			"value": "http://app:8080",
			"type": "string"
		},
		{
			"id": "66e70ebb-84cd-4ffe-b9b8-85de74492abe",
			"key": "storage_uuid",
			"value": "b3d1b2a6-bd5b-49d5-bd9e-86538fdc180d",
			"type": "string",
			"description": ""
		},
		{
			"id": "24c159a7-9e44-452d-8e7c-935c70a436bb",
			"key": "es_url",
			"value": "http://elasticsearch:9200",
			"type": "string",
			"description": ""
		},
		{
			"id": "ce79983b-a9df-43a8-bea2-d317324d7911",
			"key": "some_key",
			"value": "key1",
			"type": "string",
			"description": ""
		},
		{
			"id": "92ec114b-642d-4828-a1ea-bbf8bb96f6f2",
			"key": "some_value",
			"value": "value1",
			"type": "string",
			"description": ""
		},
		{
			"id": "3fded08b-439f-4e3e-85ef-6537e9a0dce1",
			"key": "empty_key",
			"value": "empty_key",
			"type": "string",
			"description": ""
		},
		{
			"id": "9ef4d0d5-8c16-440a-9d79-4d15cf8d0c8d",
			"key": "non_existent_storage",
			"value": "nonexistent",
			"type": "string",
			"description": ""
		},
		{
			"id": "97e78289-8628-40d1-b145-327a3ef8a313",
			"key": "read_only_storage",
			"value": "read-only",
			"type": "string",
			"description": ""
		},
		{
			"id": "84e8c80b-2f1f-40bd-9439-6499279f253d",
			"key": "editable_storage",
			"value": "editable-single",
			"type": "string",
			"description": ""
		},
		{
			"id": "c27fcd4b-27e7-4149-b024-ef876ee4569e",
			"key": "multieditable_storage",
			"value": "editable-multiple",
			"type": "string",
			"description": ""
		},
		{
			"id": "d3145a90-fe58-4237-ac36-56a1fbb59199",
			"key": "deletable_storage",
			"value": "deletable-single",
			"type": "string",
			"description": ""
		},
		{
			"id": "275345f6-d243-4240-824b-9f3e8aa0f6f7",
			"key": "multideletable_storage",
			"value": "deletable-multiple",
			"type": "string",
			"description": ""
		},
		{
			"id": "5afb4e3f-9400-402c-aabb-e55fa8a0c7b4",
			"key": "cleanable_storage",
			"value": "cleanable",
			"type": "string",
			"description": ""
		},
		{
			"id": "11491f7e-37c2-4be0-965e-d9904f813840",
			"key": "temp_storage",
			"value": "temp",
			"type": "string",
			"description": ""
		},
		{
			"id": "989be250-fd57-4ada-a47c-6b2c2de060be",
			"key": "acc_storage",
			"value": "account",
			"type": "string",
			"description": ""
		},
		{
			"id": "9509b8fa-cacc-4890-931e-c736602a1a65",
			"key": "no_index_storage",
			"value": "no-index",
			"type": "string",
			"description": ""
		},
		{
			"id": "95ccdc16-9ae8-4d5e-8f58-612c57894004",
			"key": "not_registered_storage",
			"value": "not-registered",
			"type": "string",
			"description": ""
		},
		{
			"id": "60557a33-78c7-40e8-aa19-6590d455461c",
			"key": "storage_registry",
			"value": "storage-registry",
			"type": "string",
			"description": ""
		},
		{
			"id": "e855790d-a712-4cff-b087-41a804347d3a",
			"key": "storage_data_template",
			"value": "storage-data",
			"type": "string",
			"description": ""
		},
		{
			"id": "e73f37c5-4a27-4c0b-853d-fcf1ed451d35",
			"key": "storage_history_template",
			"value": "storage-history",
			"type": "string",
			"description": ""
		}
	]
}